<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital@0;1&family=Nunito:ital,wght@1,900&display=swap" rel="stylesheet">
    <link href='style.css' rel='stylesheet' type='text/css'>
    <title>Pestikone - Ilves26 | Tulokset</title>
    <link rel="icon" type="x-icon" href="icon.png">
    <link rel="shortcut icon" type="x-icon" href="icon.png">
    <meta charset="utf-8">
    <script>
      version = "Test Edition #1" //Remember to update this before making changes to the test itself!
    </script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
    <h1>Pestikone - Ilves26</h1><hr>

    <h1>Tulokset</h1>

    <div id="results"></div>
    <button class="button" onclick="location.href='index.html';">Takaisin</button> <br>

    <script>
        function getQueryVariable(variable) {
            const query = window.location.search.substring(1);
            const vars = query.split("&");

            for (let i = 0; i < vars.length; i++) {
                let pair = vars[i].split("=");
                if (pair[0] == variable) return Number(pair[1]);
            }
            return NaN;
        }

        const categories = [
            { key: "m", name: "Myynti", description: "" },
            { key: "p", name: "Palvelu", description: "" },
            { key: "o", name: "Ohjelma", description: "" },
            { key: "s", name: "Some", description: "" },
            { key: "h", name: "Huolto", description: "" },
            { key: "t", name: "Tekniikka", description: "" },
            { key: "l", name: "Liikenne", description: "" },
            { key: "e", name: "Elintarvike", description: "" }
        ];

        let values = categories.map(cat => ({
            name: cat.name,
            value: getQueryVariable(cat.key),
            desc: cat.description
        }));

        values.sort((a, b) => b.value - a.value);

        const container = document.getElementById("results");

        values.forEach(item => {
            const percent = item.value + "%";

            container.innerHTML += `
            <h2>${item.name}: <span class="weight-300">${percent}</span></h2>
            <div class="axis-bar">
                <div class="axis-fill" style="width: ${percent};"></div>
                <div class="axis-rest"></div>
            </div>
            <p><br>${item.desc}</p>
            <br>
        `;
        });
    </script>
</body>
